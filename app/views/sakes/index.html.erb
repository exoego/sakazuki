<% select_js("sakes_index") %>
<% select_css("sakes_index") %>

<%= render("float-button", sake: @sake) %>

<div class="row row-cols-1 g-3">
  <div class="col">
    <h1 class="mb-0">
      <%= title("#{t('.title')} - #{to_shakkan(Sake.alcohol_stock(include_empty: include_empty?(params)))}") %>
    </h1>
  </div>
  <div class="col">
    <%= search_form_for(@searched) do |f| %>
      <div class="row mx-0 align-items-center">
        <div class="col ps-0 input-group">
          <%= f.label(:all_text_cont, "search word", class: "form-label visually-hidden") %>
          <%= f.search_field(:all_text_cont,
                             class: "form-control",
                             value: params.dig(:q, :all_text_cont)) %>
          <%= tag.button(tag.i(class: "bi-search"),
                         type: "submit",
                         class: "btn btn-primary",
                         data: { testid: "submit_search" }) %>
        </div>
        <div class="col-auto">
          <div class="form-check form-switch">
            <%= f.check_box(:bottle_level_not_eq,
                            { class: "form-check-input",
                              id: "all_bottle_level",
                              data: { testid: "check_empty_bottle" },
                              onChange: "this.form.submit()", },
                            bottom_bottle,
                            Sake.bottle_levels["empty"]) %>
            <%= f.label(t(".all_bottles"),
                        class: "form-check-label",
                        for: "all_bottle_level") %>
          </div>
        </div>
        <div class="col-lg mt-lg-0 col-12 mt-3 px-0">
          <div class="btn-group float-lg-end" role="group" aria-label="Sort">
            <%= sort_link(@searched,
                          :tokutei_meisho,
                          t("activerecord.attributes.sake.tokutei_meisho")) %>
            <%= sort_link(@searched,
                          :todofuken,
                          t("activerecord.attributes.sake.todofuken")) %>
            <%= sort_link(@searched,
                          :bottle_level,
                          t("activerecord.attributes.sake.bottle_level")) %>
            <%= sort_link(@searched,
                          :taste_value,
                          t("activerecord.attributes.sake.taste_impression"),
                          default_order: :desc) %>
            <%= sort_link(@searched,
                          :aroma_value,
                          t("activerecord.attributes.sake.aroma_impression"),
                          default_order: :desc) %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  <div class="col">
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-2">
      <%= render(partial: "sake", collection: @sakes) %>
    </div>
  </div>
  <% if include_empty?(params) %>
    <div class="col d-none d-sm-block">
      <%= paginate(@sakes) %>
    </div>
    <div class="col d-sm-none d-block">
      <%# 小さい画面 %>
      <%= paginate(@sakes, window: 1) %>
    </div>
  <% end %>
</div>
