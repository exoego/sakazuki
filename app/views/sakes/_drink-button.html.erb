<% if sake.sealed? %>
  <%= link_to(tag.i(class: "bi-droplet-half me-1", style: "font-size: 0.95em;") + t(".open"),
              sake_path(sake, params: { sake: { bottle_level: "opened" } }),
              { method: :patch,
                data: { confirm: t(".confirm_open") },
                class: "badge rounded-pill bg-primary ms-2",
                "data-testid": "open-button-#{sake.id}", }) %>
<% end %>
<% if sake.unimpressed? %>
  <% p = sake.sealed? ? { sake: { bottle_level: "opened" } } : {} %>
  <% testid = sake.sealed? ? "open-and-impress-button-#{sake.id}" : "impress-button-#{sake.id}" %>
  <%= link_to(tag.i(class: "bi-cup-fill me-1", style: "font-size: 1em;") + t(".impress"),
              edit_sake_path(sake, params: p),
              { class: "badge rounded-pill bg-secondary border border-primary text-dark ms-2",
                "data-testid": testid, }) %>
<% end %>
<% if sake.opened? %>
  <%= link_to(tag.i(class: "bi-droplet me-1", style: "font-size: 0.95em;") + t(".empty"),
              sake_path(sake, params: { sake: { bottle_level: "empty" } }),
              { method: :patch,
                data: { confirm: t(".confirm_empty") },
                class: "badge rounded-pill bg-light border border-dark text-dark ms-2",
                "data-testid": "empty-button-#{sake.id}", }) %>
<% end %>
